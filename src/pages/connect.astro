---
import Layout from '../layouts/Layout.astro';
import Navigation from "../components/Navigation";
import Footer from '../components/Footer.astro';
import bannerConnect from '../assets/images/banner-connect.jpg';
import { Image } from 'astro:assets';
---

<Layout>
  <Navigation client:load />

  <div class="w-full">
    <Image src={bannerConnect} alt="Connect Banner" class="w-full aspect-3/1 object-cover shadow-md" />
  </div>

  <section class="bg-zinc-950 py-16 px-4">
    <div class=" mx-auto">
      <p class="text-zinc-200 text-xl text-center mb-12">
        We regroup a vibrant community of students and aviation enthusiasts from all around Montreal. Whether you're interested in flying, skydiving, or just meeting like-minded people, the McGill Flying Club is your gateway to the skies!
      </p>

      <div class="rounded-lg shadow-md p-8 mb-16">
        <h2 class="text-3xl font-bold text-white mb-6 text-center">become a member</h2>
        <p class="text-zinc-200 text-lg leading-relaxed text-justify mb-6">
          As a member of the McGill Flying Club, you join a passionate community of students and aviation enthusiasts. Membership gives you access to exclusive events, discounted flight and skydiving training, ground school courses, social gatherings, and a network of experienced pilots and skydivers. Members can participate in club trips, workshops, and receive special partner discounts.
        </p>
        <p class="text-zinc-200 text-lg leading-relaxed text-justify mb-6">
          <strong>Requirements:</strong> Membership is open to all students and young adults in Montreal and the surrounding area. No prior flying or skydiving experience is required—just a genuine interest in aviation, a willingness to learn, and a collaborative spirit. All you need is enthusiasm and a desire to be part of our growing community!
        </p>
        <div class="flex justify-center">
          <iframe 
            src="https://docs.google.com/forms/d/e/1FAIpQLSeZ1J82Ns6Nq4pu3wEXs5GAJMum3DBGAaF4R09ZbdQ7TgFiMg/viewform?embedded=true" 
            width="640" 
            height="1200" 
            frameborder="0" 
            marginheight="0" 
            marginwidth="0"
            class="w-full max-w-2xl rounded-lg shadow-md bg-white"
            >Loading…</iframe>
        </div>
      </div>

      <div class="bg-zinc-900 rounded-lg shadow-md p-8">
        <h2 class="text-3xl font-bold text-white mb-6 text-center">contact us</h2>
        <div id="form-success" class="hidden mb-4 px-4 py-3 rounded bg-green-600 text-white text-center">
          Thank you! Your message has been submitted.
        </div>
        <form id="contact-form" action="https://formsubmit.co/ajax/mcgillflyingclub@gmail.com" method="post" class="flex flex-col gap-4">
          <input type="text" name="name" placeholder="Your Name" required class="px-4 py-2 rounded bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-red-400" />
          <input type="email" name="email" placeholder="Your Email" required class="px-4 py-2 rounded bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-red-400" />
          <input type="text" name="subject" placeholder="Subject" required class="px-4 py-2 rounded bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-red-400" />
          <select name="category" required class="px-4 py-2 rounded bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-red-400">
            <option value="">Select a category</option>
            <option value="ground school">Ground School</option>
            <option value="flight training">Flight Training</option>
            <option value="skydiving">Skydiving</option>
            <option value="skydiving training">Skydiving Training</option>
            <option value="events">Events</option>
            <option value="other">Other</option>
          </select>
          <textarea name="message" placeholder="Your Message" rows="5" required class="px-4 py-2 rounded bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-red-400"></textarea>
          <input type="hidden" name="_captcha" value="false">
          <button type="submit" class="bg-red-500 hover:bg-red-400 text-white font-semibold py-2 px-6 rounded transition-colors">Send Email</button>
        </form>
      </div>
    </div>
  </section>

  <Footer />
</Layout>

<script>
  document.getElementById('contact-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    const response = await fetch(form.action, {
      method: 'POST',
      body: data,
      headers: { 'Accept': 'application/json' }
    });
    if (response.ok) {
      alert("Thank you! Your message has been submitted.");
      form.reset();
    } else {
      alert("There was an error submitting the form. Please try again.");
    }
  });
</script>
